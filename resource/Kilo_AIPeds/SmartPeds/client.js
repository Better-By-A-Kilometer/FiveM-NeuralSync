"use strict";(()=>{var __getOwnPropNames=Object.getOwnPropertyNames;var __commonJS=(cb,mod)=>function __require(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var require_client=__commonJS({"modules/SmartPeds/client/client.ts"(exports){async function ShowKeyboard(){var text="";DisplayOnscreenKeyboard(0,"FMMC_KEY_TIP8","","","","","",100);while(UpdateOnscreenKeyboard()==0){if(UpdateOnscreenKeyboard()==0){DisableAllControlActions(0)}Wait(0)}if(GetOnscreenKeyboardResult()==null)return text;return GetOnscreenKeyboardResult()}function GetClosestPedToPlayer(playerPed,radius){let closestPed=-1;let[playerCoordsX,playerCoordsY,playerCoordsZ]=GetEntityCoords(playerPed,false);const allPeds=GetGamePool("CPed");let closestDistance=-1;for(let ped of allPeds){let[pedCoordsX,pedCoordsY,pedCoordsZ]=GetEntityCoords(ped,false);let distance=Vdist(playerCoordsX,playerCoordsY,playerCoordsZ,pedCoordsX,pedCoordsY,pedCoordsZ);if(closestDistance===-1){closestDistance=distance;closestPed=ped}if(distance<=radius&&(closestPed===0||distance<closestDistance)){closestPed=ped;closestDistance=distance}Wait(0)}return closestPed}function ShowNotification(text){SetTextComponentFormat("STRING");AddTextComponentString(text);DisplayHelpTextFromStringLabel(0,false,true,-1)}var resourceName=GetCurrentResourceName();var moduleName="SmartPeds";var ePrefix=`${resourceName}:${moduleName}`;RegisterCommand("talk",async function(source){if(source<0)return;var closestPed=GetClosestPedToPlayer(PlayerPedId(),5);if(closestPed<0)return ShowNotification("There's no peds nearby to speak to.");var netId=NetworkGetNetworkIdFromEntity(closestPed)||-1;if(!netId||netId<0)return ShowNotification("This ped isn't AI enabled!");console.log(`Script ID: ${NetworkGetEntityNetScriptId(closestPed)}`);console.log(`IsNetworked: ${NetworkGetEntityIsNetworked(closestPed)}`);console.log(`IsLocal: ${NetworkGetEntityIsLocal(closestPed)}`);console.log(`Entity Owner ID: ${NetworkGetEntityOwner(closestPed)}`);const msg=await ShowKeyboard();exports[resourceName]["ai-message"](netId,"Stranger",msg)},false);RegisterKeyMapping("talk","Talk to an AI","keyboard","y")}});require_client();})();
